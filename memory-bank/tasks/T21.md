# T21: Zotero and Mendeley Integration
*Created: 2025-05-18 17:00*
*Last Updated: 2025-05-20 14:30*

## Overview
**Status**: ðŸ”„ In Progress
**Priority**: MEDIUM
**Started**: 2025-05-20
**Dependencies**: T6 (Paper Bookmarking System)

## Description
Implement integration with popular reference management tools Zotero and Mendeley to allow users to export papers directly to their reference libraries. This will enhance the workflow for academic users by providing seamless integration with their existing research tools.

## Progress Summary
- âœ… Completed Zotero application registration
- âœ… Created implementation documentation
- âœ… Defined OAuth flow structure
- ðŸ”„ Working on Zotero OAuth implementation

## Implementation Checklist

### Phase 1: Zotero Integration
#### 1. Setup and Documentation
- âœ… Register Zotero application
- âœ… Document setup process
- âœ… Define OAuth flow structure
- âœ… Create implementation plan

#### 2. OAuth Implementation
- â¬œ Environment Variables
  - â¬œ Add ZOTERO_CLIENT_ID
  - â¬œ Add ZOTERO_CLIENT_SECRET
  - â¬œ Add ZOTERO_REDIRECT_URI

- â¬œ API Routes
  - â¬œ Create /api/auth/zotero/login
    - â¬œ Generate state parameter
    - â¬œ Store state in session
    - â¬œ Implement Zotero auth URL redirect
  - â¬œ Create /api/auth/zotero/callback
    - â¬œ Verify state parameter
    - â¬œ Exchange code for access token
    - â¬œ Store access token securely
  - â¬œ Create /api/zotero/export
    - â¬œ Implement paper export logic
    - â¬œ Add error handling
    - â¬œ Add rate limiting

#### 3. UI Components
- â¬œ Settings Page Integration
  - â¬œ Add "Connect to Zotero" button
  - â¬œ Show connection status
  - â¬œ Add disconnect option
  - â¬œ Add error handling

- â¬œ Paper Components Integration
  - â¬œ Add export button to paper cards
  - â¬œ Add export button to paper lists
  - â¬œ Show export status/feedback
  - â¬œ Handle export errors

#### 4. Testing
- â¬œ OAuth Flow
  - â¬œ Test login process
  - â¬œ Test callback handling
  - â¬œ Test token storage
  - â¬œ Test error scenarios

- â¬œ Export Functionality
  - â¬œ Test single paper export
  - â¬œ Test with different paper formats
  - â¬œ Test error handling
  - â¬œ Test rate limiting

### Phase 2: Mendeley Integration
- â¬œ Research Mendeley API options
- â¬œ Create implementation plan
- â¬œ Implementation tasks TBD

### Phase 3: Enhanced Features
- â¬œ Batch export functionality
- â¬œ Export history tracking
- â¬œ Offline export queue
- â¬œ Custom collections support

## Files
### Created:
- âœ… `/memory-bank/implementation-details/zotero-integration-setup.md`

### To Be Created:
- â¬œ `src/lib/integrations/`
  - â¬œ `zotero.ts`
  - â¬œ `types.ts`
- â¬œ `app/api/auth/zotero/`
  - â¬œ `login/route.ts`
  - â¬œ `callback/route.ts`
- â¬œ `app/api/zotero/`
  - â¬œ `export/route.ts`
- â¬œ `src/components/integrations/`
  - â¬œ `ZoteroConnect.tsx`
  - â¬œ `ExportButton.tsx`

## Technical Notes
- Store tokens securely in HTTP-only cookies
- Implement CSRF protection
- Use state parameter in OAuth flow
- Validate all API inputs
- Rate limit API endpoints
- Implement token refresh mechanism
- Implement proper logging (via T20)

## Progress
1. ðŸ”„ Phase 1: Research & Design (In Progress)
2. â¬œ Phase 2: Core Implementation
3. â¬œ Phase 3: UI Implementation
4. â¬œ Phase 4: Testing & Documentation

## Related Issues
- GitHub Issue #11: "Zotero, Mendeley Integration"